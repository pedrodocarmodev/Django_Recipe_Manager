{% extends 'Base.html' %}
{% block content %}

<div class="card shadow-sm">
  <div class="card-body">

    <form method="POST">
      {% csrf_token %}

      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold mb-0">Editar Receita</h2>
        <a href="{% url 'recipe_delete' recipe.pk %}" 
           class="btn btn-outline-danger btn-sm">
          Deletar Receita
        </a>
      </div>

      <!-- Nome da Receita -->
      <div class="mb-4">
        <label class="form-label">Nome da Receita</label>
        <input type="text"
               name="recipe_name"
               value="{{ recipe.name }}"
               class="form-control"
               required>
      </div>

      <hr>

      <h5 class="mb-3">Ingredientes</h5>

      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-dark">
            <tr>
              <th>Item</th>
              <th>Quantidade</th>
            </tr>
          </thead>
          <tbody>
            {% for ingredient in recipe.recipeingredient_set.all %}
            <tr>
              <input type="hidden"
                     name="ingredient_id"
                     value="{{ ingredient.id }}"/>

              <td>
                <input type="text"
                       value="{{ ingredient.item.name }}"
                       class="form-control"
                       disabled>
              </td>

              <td>
                <input type="number"
                       step="0.01"
                       name="quantity_used"
                       value="{{ ingredient.used_quantity }}"
                       class="form-control"
                       required>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="d-flex justify-content-end gap-2 mt-4">
        <a href="{% url 'recipe_detail' recipe.pk %}"
           class="btn btn-outline-secondary">
          Voltar
        </a>

        <button type="submit"
                class="btn btn-primary">
          Salvar Alterações
        </button>
      </div>

    </form>

  </div>
</div>

{% endblock %}
